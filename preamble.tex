\usepackage{amssymb}
\usepackage{amsmath, amsthm}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{framed}
\usepackage{parskip}
\usepackage{graphicx}
\usepackage{chngcntr}
\usepackage{float}
\usepackage{listings}
\usepackage{inconsolata}
\usepackage{transparent}
\usepackage{tikz}


% \input xypic (for commutative diagrams)
% \include{mssymb}

\def\A{{\mathbb A}}
\def\P{{\mathbb P}}
\def\N{{\mathbb N}}
\def\Z{{\mathbb Z}}
\def\Q{{\mathbb Q}}
\def\R{{\mathbb R}}
\def\C{{\mathbb C}}
\def\F{{\mathbb F}}
\def\O{{\cal O}}
\let\sec\S
\let\S\relax
\def\S{{\mathfrak S}}
\def\g{{\mathfrak g}}
\def\p{{\mathfrak p}}
\def\h{{\mathfrak h}}
\def\n{{\mathfrak n}}
\def\v{{\mathfrak v}}
\def\m{{\mathfrak m}}
\def\a{{\alpha}}


\newcommand{\skipline}{\vspace{\baselineskip}}
\newcommand{\dis}{\displaystyle}
\newcommand{\noin}{\noindent}


% remove all paragraph indents
\setlength{\parindent}{0pt}

% Figure counter include section
\counterwithin{figure}{section}

% Cleaner figures
\newcommand{\fig}[3][0.4]{
  \begin{figure}[H]
    \centering
    \includegraphics[width=#1\textwidth, keepaspectratio]{#2}
    \caption{#3}
  \end{figure}
}

% Parens, Brackets, Bars, and Braces
\newcommand{\parens}[1]{ \left(#1\right) }
\newcommand{\bracks}[1]{ \left[#1\right] }
\newcommand{\braces}[1]{ \left\{#1\right\} }
\newcommand{\abs}[1]{ \left|#1\right| }
\newcommand{\floor}[1]{ \left\lfloor#1\right\rfloor }
\newcommand{\ceil}[1]{ \left\lceil#1\right\rceil }

% Mathematical notation


\newcommand{\Span}{\mathrm{Span}}
\newcommand{\Range}{\mathrm{Range}}
\newcommand{\Null}{\mathrm{Null}}
\newcommand{\Rank}{\mathrm{Rank}}
\newcommand{\rank}{\mathrm{rank}}
\newcommand{\Nullity}{\mathrm{Nullity}}
\newcommand{\nullity}{\mathrm{nullity}}
\newcommand{\longhookrightarrow}{\lhook\joinrel\relbar\joinrel\rightarrow}
\newcommand{\la}{\leftarrow}
\newcommand{\ra}{\rightarrow}
\newcommand{\La}{\Leftarrow}
\newcommand{\Ra}{\Rightarrow}
\newcommand{\dbar}{\overline{\partial}}
\newcommand{\gequ}{\geqslant}
\newcommand{\lequ}{\leqslant}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\End}{\mathrm{End}}
\newcommand{\Aut}{\mathrm{Aut}}
\newcommand{\Coker}{\mathrm{Coker}}
\newcommand{\Row}{\mathrm{Row}}
\newcommand{\Ker}{\mathrm{Ker}}
\newcommand{\Tr}{\mathrm{Tr}}
\newcommand{\Id}{\mathrm{Id}}
% \newcommand{\mod}{\mathrm{mod }}
\newcommand{\un}{\underline}
\newcommand{\ov}{\overline}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}
\newcommand{\pr}{\prime}
\newcommand{\rk}{\mathrm{rk}}
\newcommand{\im}{\mathrm{Im}}

% Linear Algebra

\newcommand{\lind}{linearly independent}
\newcommand{\ldep}{linearly dependent}
\renewcommand{\vec}[1]{
  {\bf #1}
}
\newcommand{\lincomb}[3]{
  #1_{1}#2_{1} + #1_{2}#2_{2} + \cdots + #1_{#3}#2_{#3}
}
\newcommand{\neglincomb}[3]{
  -#1_{1}#2_{1} - #1_{2}#2_{2} - \cdots - #1_{#3}#2_{#3}
}
\newcommand{\constants}[2]{
  #1_{1}, #1_{2}, \cdots, #1_{#2}
}
\newcommand{\constantsz}[2]{
  #1_{0}, \constants{#1}{#2}
}

% Analysis
\newcommand{\limfty}[1]{\lim_{#1 \to \infty}}
\newcommand{\seq}[2]{\{#1_{#2}\}_{#2 \in \N}}
\newcommand{\sseq}[3]{\{#1_{#2_{#3}}\}_{#3 \in \N}}
\newcommand{\chep}{Let $\epsilon > 0$}

% Category Theory
\newcommand{\catC}{\mathcal{C}}
\newcommand{\catD}{\mathcal{D}}
\newcommand{\functF}{\mathcal{F}}
\newcommand{\functG}{\mathcal{G}}
\newcommand{\functI}{\mathcal{I}}
\newcommand{\functU}{\mathcal{U}}

\newcommand{\op}[1]{#1^{\mathrm{op}}}
\newcommand{\Obj}{\mathrm{Obj}}

\newcommand{\Set}{\mathbf{Set}}
\newcommand{\Grp}{\mathbf{Grp}}
\newcommand{\Top}{\mathbf{Top}}
\newcommand{\cRing}{\mathbf{cRing}}
\newcommand{\BanAnaMan}{\mathbf{BanAnaMan}}
\newcommand{\FinSet}{\mathbf{FinSet}}
\newcommand{\Vect}{\mathbf{Vect}}
\newcommand{\Two}{\mathbf{2}}


% ================= %
% Headers & Footers
% ================= %
\pagestyle{fancy}
\fancyhf{}
\newcommand{\intros}[3]{
  \lhead{\textbf{#1} {#2}}
  \rhead{#3}}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0pt}



% ================= %
%       Utils
% ================= %
\newcommand{\induction}[3]{
  \textbf{Base Case}. #1 \\
  \textbf{Inductive Hypothesis}. \\ #2 \\
  \textbf{Inductive Step}. \\ #3
}



% Used to list all problems on homework
\newcommand{\problems}[1]{
  \medskip \noin
  {\bf Problems}

  #1

  \medskip{}
}


% When prof does Question/Answer styling
\newcommand{\qna}[2]{
  {\bf Question}: #1

  {\bf Answer}: #2
}


% augmented matrices
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother


\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
  \left.\kern-\nulldelimiterspace % automatically resize the bar with \right
  #1 % the function
  \littletaller % pretend it's a little taller at normal size
  \right|_{#2} % this is the delimiter
  }}

\newcommand{\littletaller}{\mathchoice{\vphantom{\big|}}{}{}{}}

% ================= %
%      Box Meta
% ================= %

% #2 - FG Color
% #3 - BG Color
\newenvironment{fancyleftbar}[3][\hsize]
{%
    \def\FrameCommand
    {%
        {\color{#2}\vrule width 3pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{#3}%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

\newenvironment{simpleleftbar}[3][\hsize]
{%
    \def\FrameCommand
    {%
        {\vrule width 0.5pt}%
        \hspace{3pt}
        \fboxsep=\FrameSep%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

% Used to allow the color argument to pass through the environment%
\newsavebox{\boxqed} 

% #1 - Header
% #2 - FG Color
% #3 - BG Color
\newenvironment{fancybox}[3]{
  \sbox\boxqed{\textcolor{#2}{$\blacksquare$}}
  \begin{fancyleftbar}{#2}{#3}

  \noin
  #1
  % {\large \bf \underline{#1}}
  \smallskip\noin \\
}
{

  \medskip
  \noin
  \usebox\boxqed

  \end{fancyleftbar}
}

% #1 - Text header
% #2 - Outer Text
% #3 - Inner Text
% #4 - Inner Header
% #5 - FG Color
% #6 - Background Color
\newcommand{\boxmeta}[6]{
  #1
  % {\small\sc\uppercase{#1}}

  #2

  \begin{fancybox}{#4}{#5}{#6}
    \noin
    #3
  \end{fancybox}
}

% #1 - Title
% #2 - FG Color
% #3 - BG Color
% #4 - Inner Text
\newcommand{\baronly}[4]{
  \begin{simpleleftbar}{#2}{#3}
    {\bf #1}.

    #4
  \end{simpleleftbar}
}

% ================= %
%     Box Colors
% ================= %

\definecolor{theorem_fg}{HTML}{EABAC3}
\definecolor{theorem_bg}{HTML}{F9EEF0}

\definecolor{problem_fg}{HTML}{ABABAB}
\definecolor{problem_bg}{HTML}{EDEDED}

\definecolor{lemma_fg}{HTML}{D0C97D}
\definecolor{lemma_bg}{HTML}{FCF9DB}

\definecolor{prop_fg}{HTML}{7DDB89}
\definecolor{prop_bg}{HTML}{D7FADB}

\definecolor{defn_fg}{HTML}{83D4CF}
\definecolor{defn_bg}{HTML}{E7FCFB}

\definecolor{lst_bg}{HTML}{EFF6F8}
\definecolor{lst_fg}{HTML}{475857}

\definecolor{btw_fg}{HTML}{5A5A5A}

% ================= %
%     Box Envs
% ================= %

\newcommand{\Definition}[2]{
                              \boxmeta{}{}{#2}{{\it Definition}. {\bf\underline{#1}}}{defn_fg}{defn_bg}
                            }

\newcommand{\Theorem}[2]{
  \boxmeta{{\bf Theorem.}}{#1}{#2}{{\bf Proof.}}{theorem_fg}{theorem_bg}
}

\newcommand{\NamedTheorem}[3]{
  \boxmeta{#1}{#2}{#3}{Proof}{theorem_fg}{theorem_bg}
}

\newcommand{\Problem}[3]{
  \boxmeta{Problem #1}{#2}{#3}{Solution}{problem_fg}{problem_bg}
}

\newcommand{\Example}[2]{
  \boxmeta{Example}{#1}{#2}{}{problem_fg}{problem_bg}
}

\newcommand{\Lemma}[2]{
  \boxmeta{{\bf Lemma.}}{#1}{#2}{{\bf Proof.}}{lemma_fg}{lemma_bg}
}

\newcommand{\NamedLemma}[3]{
  \boxmeta{#1}{#2}{#3}{Proof}{lemma_fg}{lemma_bg}
}

\newcommand{\Corollary}[2]{
  \boxmeta{Corollary}{#1}{#2}{Proof}{lemma_fg}{lemma_bg}
}

\newcommand{\Proposition}[2]{
  \boxmeta{Proposition}{#1}{#2}{Proof}{prop_fg}{prop_bg}
}

% ================== %
%      Bar Only
% ================== %

\newcommand{\definition}[1]{
  \baronly{Definition}{defn_fg}{defn_bg}{#1}
}

\newcommand{\theorem}[1]{
  \baronly{Theorem}{theorem_fg}{theorem_bg}{#1}
}

\newcommand{\example}[1]{
  \baronly{Example}{problem_fg}{problem_bg}{#1}
}

\newcommand{\remark}[1]{
  \baronly{Remark}{problem_fg}{problem_bg}{#1}
}

\newcommand{\note}[1]{
  \medskip
  \baronly{Note}{problem_fg}{problem_bg}{#1}
}

\newcommand{\btw}[1]{
  {\bf Author Note}.

  \begin{color}{btw_fg}
    #1
  \end{color}
}

\newcommand{\sidenote}[1]{
  {\bf Side Note}.

  \boxmeta{}{}{#1}{}{problem_fg}{problem_bg}
}



% graphs
\def\deg{\text{deg}}
\def\indeg{\text{indeg}}
\def\outdeg{\text{outdeg}}

% big O notation
\def\O{\mathcal O}

% define parent
\def\pr{\text{pr}}

% define incomplete commands
\def\TODO{\color{red}\textbf{TODO}\color{black}\,}
\def\QUESTION{\color{red}\textbf{QUESTION}\color{black}\,}



% listings settings
\lstset{
  % general styles
  backgroundcolor=\color{lst_bg},
  numbers=left,
  numberstyle=\color{lst_fg}\ttfamily\textbf,
  numbersep=3mm,
  frame=l,
  framesep=7mm,
  framexleftmargin=1.5mm,
  fillcolor=\color{lst_bg},
  rulecolor=\color{lst_bg},
  xleftmargin=9mm,
  % keyword styles
  keywordstyle=[1]\textbf,
  keywordstyle=[2]\textit,
  keywordstyle=[3]\textbf\textit,
  keywords=[1]{let, for, while, not, if, else, then, do, end, return},
  keywords=[2]{if, condition},
  keywords=[3]{do},
  mathescape=true, % enable math mode in listings
  columns=fullflexible,
  basicstyle=\ttfamily % this fond looks a bit better than the default
}

